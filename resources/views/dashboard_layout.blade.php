<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->

<!-- Mirrored from seantheme.com/color-admin-v3.0/admin/html/ by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 15 Sep 2017 12:24:45 GMT -->
<head>
	<meta charset="utf-8" />
  
	<title>One click </title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	{{-- <meta content="" name="description" /> --}}
	{{-- <meta content="" name="author" /> --}}
	
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	{!! Html::style('storage/admin_dashboard/assets/plugins/jquery-ui/themes/base/minified/jquery-ui.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/plugins/bootstrap/css/bootstrap.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/plugins/font-awesome/css/font-awesome.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/css/animate.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/css/style.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/css/style-responsive.min.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/css/theme/default.css') !!}

  {!! Html::style('storage/admin_dashboard/assets/css/chats.css') !!}
	
	<!-- ================== END BASE CSS STYLE ================== -->
	
	<!-- ================== BEGIN PAGE LEVEL STYLE ================== -->
	{!! Html::style('storage/admin_dashboard/assets/plugins/jquery-jvectormap/jquery-jvectormap.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker.css') !!}
  {!! Html::style('storage/admin_dashboard/assets/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.css') !!}
	{!! Html::style('storage/admin_dashboard/assets/plugins/gritter/css/jquery.gritter.css') !!}
  {!! Html::style('storage/admin_dashboard/assets/plugins/DataTables/media/css/dataTables.bootstrap.min.css') !!}
  {!! Html::style('storage/admin_dashboard/assets/plugins/DataTables/extensions/Responsive/css/responsive.bootstrap.min.css') !!}
  {!! Html::style('storage/admin_dashboard/assets/plugins/dropzone/min/dropzone.min.css') !!}

  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />

	<!-- ================== END PAGE LEVEL STYLE ================== -->
	
	<!-- ================== BEGIN BASE JS ================== -->
	{!! Html::script('storage/admin_dashboard/assets/plugins/pace/pace.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery/jquery-1.9.1.min.js') !!}

  
  
  {!! Html::style('storage/admin_dashboard/assets/css/bootstrap-multiselect.css') !!}
  {!! Html::script('storage/admin_dashboard/assets/js/bootstrap-multiselect.js') !!}

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">

  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery/jquery-migrate-1.1.0.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery-ui/ui/minified/jquery-ui.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/flot/jquery.flot.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/flot/jquery.flot.time.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/flot/jquery.flot.resize.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/flot/jquery.flot.pie.min.js') !!} 
  {!! Html::script('storage/admin_dashboard/assets/ckeditor/resources/js/index.js') !!}
  
	<!-- ================== END BASE JS ================== -->

  <!-- ================== BEGIN BASE JS ================== -->

  {!! Html::script('storage/admin_dashboard/assets/plugins/bootstrap/js/bootstrap.min.js') !!}

  {!! Html::script('storage/admin_dashboard/assets/plugins/DataTables/media/js/jquery.dataTables.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/DataTables/media/js/dataTables.bootstrap.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/DataTables/extensions/Responsive/js/dataTables.responsive.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/js/table-manage-default.demo.min.js') !!}
  
  <!--[if lt IE 9]>
    <script src="storage/admin_dashboard/assets/crossbrowserjs/html5shiv.js"></script>
    <script src="storage/admin_dashboard/assets/crossbrowserjs/respond.min.js"></script>
    <script src="storage/admin_dashboard/assets/crossbrowserjs/excanvas.min.js"></script>
  <![endif]-->
  {!! Html::script('storage/admin_dashboard/assets/plugins/slimscroll/jquery.slimscroll.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery-cookie/jquery.cookie.js') !!}
  
  <!-- ================== END BASE JS ================== -->
  
  <!-- ================== BEGIN PAGE LEVEL JS ================== -->
  {!! Html::script('storage/admin_dashboard/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/gritter/js/jquery.gritter.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/sparkline/jquery.sparkline.js') !!}

  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery-jvectormap/jquery-jvectormap.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/jquery-jvectormap/jquery-jvectormap-world-mill-en.js') !!}

  {!! Html::script('storage/admin_dashboard/assets/js/dashboard.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/js/form-plugins.demo.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/plugins/dropzone/min/dropzone.min.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/js/apps.min.js') !!}

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    {!! Html::script('storage/admin_dashboard/assets/js/apps.min.js') !!}

  <!-- ================== END PAGE LEVEL JS ================== -->


  <script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="yw02zsbtztzuj9h"></script>
</head>
<body>
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade in"><span class="spinner"></span></div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="fade page-sidebar-fixed page-header-fixed">
		<!-- begin #header -->
		@include('partial/dashboard_header')
		<!-- end #header -->
		
		<!-- begin #sidebar -->
		@include('partial/dashboard_sidebar')
		<!-- end #sidebar -->
		
		<!-- begin #content -->
		@yield('content')
		<!-- end #content -->
		
		
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->
	
	<script>
    function getId(url) {
        var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        var match = url.match(regExp);

        if (match && match[2].length == 11) {
            return match[2];
        } else {
            return 'error';
        }
    }

		$(document).ready(function() {
        $('.date').datepicker();
        
  			App.init();
  			Dashboard.init();
        TableManageDefault.init();

        var topic_content_id;

        $('#topic_add_form').validate({
            rules:{
                topic_name:{
                    required:true
                }
            },
            messages:{
                topic_name:{
                    required:"<font color='red'>Please enter topic name.</font>"
                }
            }
        });

        $('#topic_add_submit1').on('click',function () {
          var valid = $('#topic_add_form').valid();
          if(valid){
            $('#topic_add_submit1').prop('disabled', true);

            var topic_name = $('#topic_name').val();
            var subject_id = $('#subject_id').val();

            $.ajax({
              type: "POST",
              url: '/subject/topic_add',
              data:{
                subject_id:subject_id,
                topic_name:topic_name,
                _token: "{{ csrf_token() }}"
              },
              success: function (data) {
                if(data == 1){
                  $('#topic_add_submit1').prop('disabled', false);

                  $.confirm({
                      title: 'Confirmation!',
                      content: 'Topic added successfully',
                      buttons: {
                          OK: function () {
                            window.location.reload();
                          }
                      }
                  });
                }
              }
            });
          }
        });

        $('#edit_profile_form').validate({
          rules:{
            f_name:{
              required:true
            },
            l_name:{
              required:true
            },
            mobile:{
              required:true,
              number:true,
              maxlength:10,
              minlength:10
            },
            address:{
              required:true
            }
          },
          messages:{
            f_name:{
              required:"<font color='red'>First name can't be left blank.</font>"
            },
            l_name:{
              required:"<font color='red'>Last name can't be left blank.</font>"
            },
            mobile:{
              required:"<font color='red'>Mobile number can't be left blank.</font>",
              number:"<font color='red'>Please enter valid mobile number.</font>",
              maxlength:"<font color='red'>Mobile number should be 10 digit.</font>",
              minlength:"<font color='red'>Mobile number should be 10 digit.</font>"
            },
            address:{
              required:"<font color='red'>Address can't be left blank.</font>"
            }
          }
        });

        $('#edit_profile_submit').on('click',function(){
          var valid = $('#edit_profile_form').valid();
          if(valid){
            $('#edit_profile_form').submit();
          }
        });

        setTimeout(function() {
          $("#success-alert").hide('blind', {}, 500)
        }, 2000);

        $('#embed_video_add_form').validate({
          rules:{
            embedUrl:{
              required: true
            }
          },
          messages:{
            embedUrl:{
              required: "Please enter youtube URL"
            }
          }
        });

        $('#embedd_video_submit').on('click',function(){
          var valid = $('#embed_video_add_form').valid();
          if(valid){
            var myId;
            var myUrl = $('#embedUrl').val();
            myId = getId(myUrl); 
            
            $('#modal_embed_video').modal('hide');
            $('#modal_embed_video').find("input").val('').end();
            
            // $('#show_embed_video').append('<iframe width="200" height="175" src="//www.youtube.com/embed/' + myId + '" frameborder="0" allowfullscreen></iframe>');

            topic_content_id = $(this).attr('topic_content_id');

            $.ajax({
              type: "POST",
              url:"/subject/upload_embed_video",
              data:{
                file_link:myUrl,
                topic_content_id:topic_content_id,
                _token:"{{ csrf_token() }}"
              },
              success: function (data){
                if(data==1){
                  $.confirm({
                    title: 'Confirmation!',
                    content: 'Embeded video added successfully',
                    buttons: {
                        OK: function () {
                        }
                    }
                  });
                }
              }
            });
          }
        });


        //dropbox start
        $('.dropbox_file').on('click', function () {
          Dropbox.choose(options);

          topic_content_id = $(this).attr('topic_content_id');
        });

        options = {

          // Required. Called when a user selects an item in the Chooser.
          success: function(files) {
              // alert("Here's the file link: " + files[0].link);
              $.ajax({
                type: "POST",
                url:"/subject/upload_dropbox_file",
                data:{
                  file_link:files[0].link,
                  topic_content_id:topic_content_id,
                  _token:"{{ csrf_token() }}"
                },
                success: function (data){
                  if(data==1){
                    $.confirm({
                      title: 'Confirmation!',
                      content: 'Dropbox file added successfully',
                      buttons: {
                          OK: function () {
                            // window.location.reload();
                          }
                      }
                    });
                  }
                }
              });
          },

          // Optional. Called when the user closes the dialog without selecting a file
          // and does not include any parameters.
          cancel: function() {

          },

          // Optional. "preview" (default) is a preview link to the document for sharing,
          // "direct" is an expiring link to download the contents of the file. For more
          // information about link types, see Link types below.
          linkType: "direct", // or "direct"

          // Optional. A value of false (default) limits selection to a single file, while
          // true enables multiple file selection.
          multiselect: false, // or true

          // Optional. This is a list of file extensions. If specified, the user will
          // only be able to select files with these extensions. You may also specify
          // file types, such as "video" or "images" in the list. For more information,
          // see File types below. By default, all extensions are allowed.
          extensions: ['.pdf', '.doc', '.docx'],
        };

      file = {
        // Unique ID for the file, compatible with Dropbox API v2.
        id: "id:...",

        // Name of the file.
        name: "filename.txt",

        // URL to access the file, which varies depending on the linkType specified when the
        // Chooser was triggered.
        link: "https://...",

        // Size of the file in bytes.
        bytes: 464,

        // URL to a 64x64px icon for the file based on the file's extension.
        icon: "https://...",

        // A thumbnail URL generated when the user selects images and videos.
        // If the user didn't select an image or video, no thumbnail will be included.
        thumbnailLink: "https://...?bounding_box=75&mode=fit",

        // Boolean, whether or not the file is actually a directory
        isDir: false,
      };
    //end dropbox
            
		});
	</script>


@if((Request::segment(2) === 'add') || (Request::segment(2) === 'edit') || (Request::segment(4) === 'add') || (Request::segment(4) === 'edit'))

  {!! Html::script('storage/admin_dashboard/assets/ckeditor/resources/libs/ckeditor/ckeditor.js') !!}
  {!! Html::script('storage/admin_dashboard/assets/ckeditor/resources/libs/ckeditor/adapters/jquery.js') !!}

  <script type="text/javascript">
    CKEDITOR.replace( 'description', {
        height: 260,
        width: 880,
    } );
  </script>
         
@endif


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53034621-1', 'auto');
  ga('send', 'pageview');


//for profile image preview & size validation

	function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function (e) {
                $('.image_preview').attr('src', e.target.result);
                $('.header_image_preview').attr('src', e.target.result);
                $('.sidebar_image_preview').attr('src', e.target.result);
            }
            
            reader.readAsDataURL(input.files[0]);
        }
    }
    
    $(".profile_image").change(function(){
        readURL(this);
    });

    $("#image").change(function(){
        var input = this;
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            
            reader.onload = function (e) {
                $('.img-team').attr('src', e.target.result);
            }
            
            reader.readAsDataURL(input.files[0]);
        }
    });

     $(document).on('change','.profile_image',function(){
          files = this.files;
          size = files[0].size;
          //max size 50kb => 50*1000
          if( size > 2000000){
             alert('Please upload less than 2MB file');
             return false;
          }
          return true;
     });

     

</script>

</body>

</html>
